const { Pool } = require('pg');
require('dotenv').config();

async function seedPageDescriptions() {
  const pool = new Pool({
    user: process.env.DB_USER || 'postgres',
    password: process.env.DB_PASSWORD,
    host: process.env.DB_HOST || 'localhost',
    port: process.env.DB_PORT || 5432,
    database: process.env.DB_NAME || 'stonerose',
  });

  try {
    console.log('üîÑ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –æ–ø–∏—Å–∞–Ω–∏–π —Å—Ç—Ä–∞–Ω–∏—Ü...');
    
    // –ü—Ä–∏–º–µ—Ä –æ–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –ø–∞–º—è—Ç–Ω–∏–∫–æ–≤
    const singleMonumentsDescription = {
      pageSlug: 'monuments-single',
      pageTitle: '–û–¥–∏–Ω–æ—á–Ω—ã–µ –ø–∞–º—è—Ç–Ω–∏–∫–∏',
      blocks: [
        {
          id: '1',
          type: 'heading',
          content: { text: '–û–¥–∏–Ω–æ—á–Ω—ã–µ –ø–∞–º—è—Ç–Ω–∏–∫–∏ –∏–∑ –≥—Ä–∞–Ω–∏—Ç–∞', level: 2 }
        },
        {
          id: '2',
          type: 'paragraph',
          content: { 
            text: '–û–¥–∏–Ω–æ—á–Ω—ã–µ –ø–∞–º—è—Ç–Ω–∏–∫–∏ ‚Äì —ç—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∏ –Ω–∞–∏–±–æ–ª–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–π –≤–∏–¥ –º–µ–º–æ—Ä–∏–∞–ª—å–Ω—ã—Ö —Å–æ–æ—Ä—É–∂–µ–Ω–∏–π. –û–Ω–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –Ω–∞ –º–æ–≥–∏–ª–∞—Ö –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —Å—Ç–µ–ª—É —Å –ø–æ—Ä—Ç—Ä–µ—Ç–æ–º, –Ω–∞–¥–ø–∏—Å—å—é –∏ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏.' 
          }
        },
        {
          id: '3',
          type: 'list',
          content: {
            type: 'unordered',
            items: [
              '–í—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≥—Ä–∞–Ω–∏—Ç —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤',
              '–†—É—á–Ω–∞—è –≥—Ä–∞–≤–∏—Ä–æ–≤–∫–∞ –ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤ –∏ —Ç–µ–∫—Å—Ç–∞',
              '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–∫–∞–∑–∞',
              '–î–æ–ª–≥–æ–≤–µ—á–Ω–æ—Å—Ç—å –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –ø–æ–≥–æ–¥–Ω—ã–º —É—Å–ª–æ–≤–∏—è–º',
              '–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ü–µ–Ω—ã –∏ –≥–∏–±–∫–∏–µ —É—Å–ª–æ–≤–∏—è –æ–ø–ª–∞—Ç—ã'
            ]
          }
        },
        {
          id: '4',
          type: 'quote',
          content: {
            text: '–ü–∞–º—è—Ç–Ω–∏–∫ ‚Äì —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∫–∞–º–µ–Ω—å, —ç—Ç–æ —Å–ø–æ—Å–æ–± —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–∞–º—è—Ç—å –æ –±–ª–∏–∑–∫–æ–º —á–µ–ª–æ–≤–µ–∫–µ –Ω–∞ –¥–æ–ª–≥–∏–µ –≥–æ–¥—ã.',
            author: '–ú–∞—Å—Ç–µ—Ä –ø–æ –∫–∞–º–Ω—é'
          }
        }
      ]
    };

    // –ü—Ä–∏–º–µ—Ä –æ–ø–∏—Å–∞–Ω–∏—è –¥–ª—è —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã—Ö –ø–∞–º—è—Ç–Ω–∏–∫–æ–≤
    const exclusiveMonumentsDescription = {
      pageSlug: 'monuments-exclusive',
      pageTitle: '–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –ø–∞–º—è—Ç–Ω–∏–∫–∏',
      blocks: [
        {
          id: '1',
          type: 'heading',
          content: { text: '–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –ø–∞–º—è—Ç–Ω–∏–∫–∏ –ø—Ä–µ–º–∏—É–º –∫–ª–∞—Å—Å–∞', level: 2 }
        },
        {
          id: '2',
          type: 'paragraph',
          content: { 
            text: '–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –ø–∞–º—è—Ç–Ω–∏–∫–∏ –∏–∑–≥–æ—Ç–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∏–∑ —Ä–µ–¥–∫–∏—Ö —Å–æ—Ä—Ç–æ–≤ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–æ–≥–æ –∫–∞–º–Ω—è –∏ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º. –ö–∞–∂–¥—ã–π –ø–∞–º—è—Ç–Ω–∏–∫ ‚Äì –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∏—Å–∫—É—Å—Å—Ç–≤–∞, —Å–æ–∑–¥–∞–Ω–Ω–æ–µ –æ–ø—ã—Ç–Ω—ã–º–∏ –º–∞—Å—Ç–µ—Ä–∞–º–∏.' 
          }
        },
        {
          id: '3',
          type: 'heading',
          content: { text: '–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏', level: 3 }
        },
        {
          id: '4',
          type: 'list',
          content: {
            type: 'unordered',
            items: [
              '–†–µ–¥–∫–∏–µ —Å–æ—Ä—Ç–∞ –≥—Ä–∞–Ω–∏—Ç–∞ —Å–æ –≤—Å–µ–≥–æ –º–∏—Ä–∞',
              '–ê–≤—Ç–æ—Ä—Å–∫–∏–µ –¥–∏–∑–∞–π–Ω–µ—Ä—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è',
              '–°–ª–æ–∂–Ω–∞—è —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞',
              '–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã',
              '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –∫–∞–∂–¥–æ–º—É –ø—Ä–æ–µ–∫—Ç—É'
            ]
          }
        }
      ]
    };

    // –í—Å—Ç–∞–≤–ª—è–µ–º –ø—Ä–∏–º–µ—Ä—ã –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
    const insertQuery = `
      INSERT INTO page_descriptions (page_slug, page_title, blocks, created_at, updated_at)
      VALUES ($1, $2, $3, NOW(), NOW())
      ON CONFLICT (page_slug) DO UPDATE SET
        page_title = $2,
        blocks = $3,
        updated_at = NOW()
    `;

    await pool.query(insertQuery, [
      singleMonumentsDescription.pageSlug,
      singleMonumentsDescription.pageTitle,
      JSON.stringify(singleMonumentsDescription.blocks)
    ]);

    await pool.query(insertQuery, [
      exclusiveMonumentsDescription.pageSlug,
      exclusiveMonumentsDescription.pageTitle,
      JSON.stringify(exclusiveMonumentsDescription.blocks)
    ]);
    
    console.log('‚úÖ –ü—Ä–∏–º–µ—Ä—ã –æ–ø–∏—Å–∞–Ω–∏–π —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã!');
    console.log('üìÑ –î–æ–±–∞–≤–ª–µ–Ω—ã –æ–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –∏ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã—Ö –ø–∞–º—è—Ç–Ω–∏–∫–æ–≤');
    
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–∏–º–µ—Ä–æ–≤:', error);
    process.exit(1);
  } finally {
    await pool.end();
  }
}

// –ó–∞–ø—É—Å–∫–∞–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤
seedPageDescriptions();